<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <link href="css/site.css" rel="stylesheet" type="text/css" />
  <title>Vs Chromium - Technical specifications</title>
</head>
<body>

<div id="container">

<div id="sidebar">
  <ul>
    <li><a href="index.html">Overview</a></li>
    <li><a href="chromium-explorer.html">Chromium Explorer</a></li>
    <ul class="ul-second">
      <li><a href="chromium-explorer-indexing.html">Opening files</a></li>
      <li><a href="chromium-explorer-navigating.html">Navigating</a></li>
      <li><a href="chromium-explorer-search-filenames.html">File name search</a></li>
      <li><a href="chromium-explorer-search-directorynames.html">Directory name search</a></li>
      <li><a href="chromium-explorer-search-filecontents.html">Text search</a></li>
      <li><a href="chromium-explorer-keyboard-shortcuts.html">Keyboard shortcuts</a></li>
    </ul>
    <li><a href="chromium-style-checker.html">Chromium Coding Style checker</a></li>
    <li><a href="configuration.html">Configuration</a></li>
    <li><a href="installation.html">Installation Instructions</a></li>
    <li><a href="requirements.html">Requirements</a></li>
    <li><a href="tech-specs.html">Technical Specifications</a></li>
  </ul>
</div> <!-- sidebar -->


<div id="content">

<h1>Technical specifications</h1>

<p>From a technical perpective, the "search engine" used by VsChromium has
been designed with the assumption that a good amount (e.g. at least 2GB) of
physical memory is available. This allows the search engine to load all
relevant source files in memory for fast brute-force text search.</p>

<p>The search engine has been carefully optimized to make use of
multi-core processors for many internal operations. So, in general, the more
cores are available, the faster the engine is.</p>

<p>For example, a HP Z620 with 2x8 cores processors and hyperthreading enabled,
the search engine uses 32 worker threads (1 thread per logical processor).</p>

<ul>
<li>During initial file loading from an SSD, the engine loads 90,000+ files in
parrallel and achieves ~80% CPU utilization. All files are usually loaded in
less than 10 sec.</li>

<li>During a "Text Search" operation, the engine paritions the files to search
into 32 equally sized partitions, runs a search query accross 32 threads,
then merge the results before sending back to the VsChromium package. Using
efficient string search algorithms (<a href="http://www-igm.univ-mlv.fr/~lecroq/string/bndm.html">bndm<a>
and <a href="http://en.wikipedia.org/wiki/Boyer-Moore_string_search_algorithm">Boyer-Moore</a>),
the search engine achieves throughputs of 15+GB/s, meaning a text search
usually takes less than 0.1s with 1.2GB of source files.</li>
</ul>

<h2>Server process</h2>

<p>To avoid competing with the VM address space of the Visual Studio process
(devenv.exe), the VsChromium search engine runs as a child process of
Visual Studio.</p>

<p>Example of memory usage and process relationship after loading ~1.2GB of
source files:</p>

<img src="Screenshots/ProcessExplorer.png"></img>

<p>The server process is always automatically terminated when the Visual Studio
process is terminated. Each instance of Visual Studio uses its own instance
of the VsChromium server process.</p>

<p>IPC: The VsChromium package and the VsChromium server process use protobuf
over a local TCP connection as IPC mechanism.</p>

<p>To avoid running out of VM address space, the search engine runs as a
64-bit process.</p>

</div> <!-- content -->
</div> <!-- container -->

</body>
</html>
